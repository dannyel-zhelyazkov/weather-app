{"ast":null,"code":"import { convertToHoursMinutes, convertToMonthDay } from \"./date.util\";\nimport moment from \"moment\";\nexport const convertMonthDayToId = date => date.split(\" \").join(\"-\").toLowerCase();\nconst parseToCurrentWeather = data => ({\n  date: convertToMonthDay(),\n  temp: Math.round(today.main.temp),\n  icon: `${process.env.REACT_APP_WEATHER_ICONS_URL}/${todayWeather.icon}@2x.png`,\n  description: todayWeather.description.charAt(0).toUpperCase() + todayWeather.description.slice(1),\n  // make the first letter of the description upper case\n  main: todayWeather.main,\n  time: convertToHoursMinutes()\n});\nexport const reduceForecastData = data => {\n  const reduced = data.list.reduce((acc, current) => {\n    const key = convertToMonthDay(current.dt_txt);\n    const forecast = {\n      time: convertToHoursMinutes(current.dt_txt),\n      temp: Math.round(current.main.temp),\n      icon: `${process.env.REACT_APP_WEATHER_ICONS_URL}/${current.weather[0].icon}@2x.png`,\n      main: current.weather[0].main,\n      description: current.weather[0].description.charAt(0).toUpperCase() + current.weather[0].description.slice(1),\n      // make the first letter of the description upper case,\n      date: convertToMonthDay(key)\n    };\n    if (!acc[key]) {\n      acc[key] = [forecast];\n      return acc;\n    }\n    acc[key].push(forecast);\n    return acc;\n  }, {});\n  return Object.entries(reduced).splice(0, 5);\n};\nexport const parseWeatherForecastData = data => {\n  const result = {};\n  const today = data.weatherData;\n  const todayWeather = data.weatherData.weather[0];\n  const todayKey = convertMonthDayToId(convertToMonthDay());\n  const forecasts = reduceForecastData(data.forecastData);\n  result[todayKey] = {\n    weather: {\n      date: convertToMonthDay(),\n      temp: Math.round(today.main.temp),\n      icon: `${process.env.REACT_APP_WEATHER_ICONS_URL}/${todayWeather.icon}@2x.png`,\n      description: todayWeather.description.charAt(0).toUpperCase() + todayWeather.description.slice(1),\n      // make the first letter of the description upper case\n      main: todayWeather.main,\n      time: convertToHoursMinutes()\n    },\n    forecast: forecasts[0][1]\n  };\n  forecasts.splice(1, 5).forEach(value => {\n    const weatherObj = value[1][Math.floor(moment().hour() / 3)]; // current time divided by 3 gives the index of the current's forecast weather\n    result[convertMonthDayToId(value[0])] = {\n      weather: weatherObj,\n      forecast: value[1]\n    };\n  });\n  return result;\n};","map":{"version":3,"names":["convertToHoursMinutes","convertToMonthDay","moment","convertMonthDayToId","date","split","join","toLowerCase","parseToCurrentWeather","data","temp","Math","round","today","main","icon","process","env","REACT_APP_WEATHER_ICONS_URL","todayWeather","description","charAt","toUpperCase","slice","time","reduceForecastData","reduced","list","reduce","acc","current","key","dt_txt","forecast","weather","push","Object","entries","splice","parseWeatherForecastData","result","weatherData","todayKey","forecasts","forecastData","forEach","value","weatherObj","floor","hour"],"sources":["/Users/maistor_dany/Projects/weather-app/src/utils/weather.util.ts"],"sourcesContent":["import { convertToHoursMinutes, convertToMonthDay } from \"./date.util\";\nimport { ForecastResponse, WeatherResponse } from \"../api\";\nimport { WeatherData, WeatherDisplay } from \"../store\";\nimport { ForecastData } from \"../api/types\";\nimport moment from \"moment\";\n\nexport const convertMonthDayToId = (date: string) =>\n  date.split(\" \").join(\"-\").toLowerCase();\n\nconst parseToCurrentWeather = (data: WeatherResponse) => ({\n  date: convertToMonthDay(),\n  temp: Math.round(today.main.temp),\n  icon: `${process.env.REACT_APP_WEATHER_ICONS_URL}/${todayWeather.icon}@2x.png`,\n  description:\n    todayWeather.description.charAt(0).toUpperCase() +\n    todayWeather.description.slice(1), // make the first letter of the description upper case\n  main: todayWeather.main,\n  time: convertToHoursMinutes(),\n});\n\nexport const reduceForecastData = (data: ForecastResponse) => {\n  const reduced = data.list.reduce(\n    (acc: { [key: string]: WeatherDisplay[] }, current: ForecastData) => {\n      const key = convertToMonthDay(current.dt_txt);\n      const forecast: WeatherDisplay = {\n        time: convertToHoursMinutes(current.dt_txt),\n        temp: Math.round(current.main.temp),\n        icon: `${process.env.REACT_APP_WEATHER_ICONS_URL}/${current.weather[0].icon}@2x.png`,\n        main: current.weather[0].main,\n        description:\n          current.weather[0].description.charAt(0).toUpperCase() +\n          current.weather[0].description.slice(1), // make the first letter of the description upper case,\n        date: convertToMonthDay(key),\n      };\n\n      if (!acc[key]) {\n        acc[key] = [forecast];\n\n        return acc;\n      }\n\n      acc[key].push(forecast);\n\n      return acc;\n    },\n    {},\n  );\n\n  return Object.entries(reduced).splice(0, 5);\n};\n\nexport const parseWeatherForecastData = (data: {\n  weatherData: WeatherResponse;\n  forecastData: ForecastResponse;\n}): WeatherData => {\n  const result: WeatherData = {};\n\n  const today = data.weatherData;\n  const todayWeather = data.weatherData.weather[0];\n  const todayKey = convertMonthDayToId(convertToMonthDay());\n\n  const forecasts = reduceForecastData(data.forecastData);\n\n  result[todayKey] = {\n    weather: {\n      date: convertToMonthDay(),\n      temp: Math.round(today.main.temp),\n      icon: `${process.env.REACT_APP_WEATHER_ICONS_URL}/${todayWeather.icon}@2x.png`,\n      description:\n        todayWeather.description.charAt(0).toUpperCase() +\n        todayWeather.description.slice(1), // make the first letter of the description upper case\n      main: todayWeather.main,\n      time: convertToHoursMinutes(),\n    },\n    forecast: forecasts[0][1],\n  };\n\n  forecasts.splice(1, 5).forEach((value) => {\n    const weatherObj = value[1][Math.floor(moment().hour() / 3)]; // current time divided by 3 gives the index of the current's forecast weather\n    result[convertMonthDayToId(value[0])] = {\n      weather: weatherObj,\n      forecast: value[1],\n    };\n  });\n\n  return result;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}